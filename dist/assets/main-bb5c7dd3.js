/* empty css               */(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function m(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(t){if(t.ep)return;t.ep=!0;const r=m(t);fetch(t.href,r)}})();document.addEventListener("DOMContentLoaded",()=>{fetch("../partials/header.html").then(n=>n.text()).then(n=>{document.querySelector("header").innerHTML=n;const s=JSON.parse(localStorage.getItem("loggedInUser"));s&&U(s.username)}),fetch("../partials/footer.html").then(n=>n.text()).then(n=>{document.querySelector("footer").innerHTML=n})});const U=n=>{const s=document.querySelector(".login-register");s.innerHTML=`Welcome, ${n}! <a href="#" id="logout">Log Out</a>`,document.getElementById("logout").addEventListener("click",c=>{c.preventDefault(),localStorage.removeItem("loggedInUser"),location.reload()})};console.log("Weather App is running!");document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("city-name"),s=document.getElementById("temperature"),m=document.getElementById("forecast-container"),c=document.querySelector(".search-container input"),t=document.querySelector(".suggestions-container"),r=document.getElementById("unit-toggle");let i=!0;const g="0066e3596484e7ae608d23fe3959f109",T=async(o,e)=>{try{const a=i?"metric":"imperial",u=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${o}&lon=${e}&units=${a}&appid=${g}`);if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);const l=await u.json(),x=l.name,M=l.sys.country,S=l.main.temp,b=l.weather[0].icon,H=l.weather[0].description;n.textContent=`Temperature in ${x}, ${M}`,s.innerHTML=`
            
            <img src="http://openweathermap.org/img/wn/${b}@2x.png" alt="${H}">${S} 째${i?"C":"F"}
        `;const y=await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${o}&lon=${e}&units=${a}&appid=${g}`);if(!y.ok)throw new Error(`HTTP error! status: ${y.status}`);const w=(await y.json()).list,C=w.reduce((d,p)=>{const h=new Date(p.dt_txt).toDateString();return d[h]||(d[h]=[]),d[h].push(p.main.temp_min,p.main.temp_max),d},{}),I=Object.keys(C).slice(0,5),O=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],P=["January","February","March","April","May","June","July","August","September","October","November","December"];m.innerHTML="",I.forEach(d=>{const p=C[d],h=Math.min(...p),F=Math.max(...p),$=new Date(d),k=O[$.getUTCDay()],q=P[$.getUTCMonth()],N=`${k}, ${q} ${$.getUTCDate()}`,E=document.createElement("div");E.classList.add("forecast-day"),E.innerHTML=`
                    <p>${N}</p>
                    <img src="http://openweathermap.org/img/wn/${w.find(L=>new Date(L.dt_txt).toDateString()===d).weather[0].icon}@2x.png" alt="${w.find(L=>new Date(L.dt_txt).toDateString()===d).weather[0].description}">
                    <p>Min: ${h} 째${i?"C":"F"}</p>
                    <p>Max: ${F} 째${i?"C":"F"}</p>
                `,m.appendChild(E)})}catch(a){console.error("Error fetching the weather data:",a),n.textContent="Error retrieving weather data.",s.textContent=""}},f=async o=>{try{const e=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${o}&appid=${g}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const a=await e.json(),{lat:u,lon:l}=a.coord;await T(u,l)}catch(e){console.error("Error fetching the weather data:",e),n.textContent="Error retrieving weather data.",s.textContent=""}},v=async o=>{try{const e=await fetch(`https://wft-geo-db.p.rapidapi.com/v1/geo/cities?namePrefix=${o}`,{method:"GET",headers:{"X-RapidAPI-Key":"e910cc3969msh71ab17d4f77c665p1b6bfajsn5ecd6ff742cf","X-RapidAPI-Host":"wft-geo-db.p.rapidapi.com"}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return(await e.json()).data.map(u=>`${u.city}, ${u.country}`)}catch(e){return console.error("Error fetching city suggestions:",e),[]}},D=o=>{t.innerHTML="",o.forEach(e=>{const a=document.createElement("div");a.classList.add("suggestion"),a.textContent=e,a.addEventListener("click",()=>{c.value=e,f(e),t.innerHTML=""}),t.appendChild(a)})};navigator.geolocation?navigator.geolocation.getCurrentPosition(async o=>{const{latitude:e,longitude:a}=o.coords;await T(e,a)},()=>{n.textContent="Unable to retrieve your location."}):n.textContent="Geolocation is not supported by this browser.",c.addEventListener("input",async()=>{const o=c.value.trim();if(o){const e=await v(o);D(e)}else t.innerHTML=""}),c.addEventListener("keypress",o=>{if(o.key==="Enter"){const e=c.value.trim();e&&(f(e),t.innerHTML="")}}),r.addEventListener("click",()=>{i=!i,r.textContent=`Switch to 째${i?"F":"C"}`;const o=n.textContent.split(" ")[2];o&&f(o)})});
