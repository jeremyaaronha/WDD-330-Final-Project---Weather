import"./loadHeaderFooter-d7a9e1d1.js";console.log("Weather App is running!");document.addEventListener("DOMContentLoaded",()=>{const o=document.getElementById("city-name"),s=document.getElementById("temperature"),E=document.getElementById("forecast-container"),m=document.querySelector(".search-container input"),p=document.querySelector(".suggestions-container"),C=document.getElementById("unit-toggle");let c=!0;const l="0066e3596484e7ae608d23fe3959f109",T=async(e,t)=>{try{const n=c?"metric":"imperial",r=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${t}&units=${n}&appid=${l}`);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const i=await r.json(),x=i.name,b=i.sys.country,M=i.main.temp,k=i.weather[0].icon,S=i.weather[0].description;o.textContent=`Temperature in ${x}, ${b}`,s.innerHTML=`
            
            <img src="http://openweathermap.org/img/wn/${k}@2x.png" alt="${S}">${M} 째${c?"C":"F"}
        `;const g=await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${e}&lon=${t}&units=${n}&appid=${l}`);if(!g.ok)throw new Error(`HTTP error! status: ${g.status}`);const y=(await g.json()).list,L=y.reduce((a,d)=>{const h=new Date(d.dt_txt).toDateString();return a[h]||(a[h]=[]),a[h].push(d.main.temp_min,d.main.temp_max),a},{}),H=Object.keys(L).slice(0,5),I=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],P=["January","February","March","April","May","June","July","August","September","October","November","December"];E.innerHTML="",H.forEach(a=>{const d=L[a],h=Math.min(...d),F=Math.max(...d),w=new Date(a),j=I[w.getUTCDay()],B=P[w.getUTCMonth()],A=`${j}, ${B} ${w.getUTCDate()}`,f=document.createElement("div");f.classList.add("forecast-day"),f.innerHTML=`
                    <p>${A}</p>
                    <img src="http://openweathermap.org/img/wn/${y.find($=>new Date($.dt_txt).toDateString()===a).weather[0].icon}@2x.png" alt="${y.find($=>new Date($.dt_txt).toDateString()===a).weather[0].description}">
                    <p>Min: ${h} 째${c?"C":"F"}</p>
                    <p>Max: ${F} 째${c?"C":"F"}</p>
                `,E.appendChild(f)})}catch(n){console.error("Error fetching the weather data:",n),o.textContent="Error retrieving weather data.",s.textContent=""}},u=async e=>{try{const t=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=${l}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const n=await t.json(),{lat:r,lon:i}=n.coord;await T(r,i)}catch(t){console.error("Error fetching the weather data:",t),o.textContent="Error retrieving weather data.",s.textContent=""}},v=async e=>{try{const t=await fetch(`https://wft-geo-db.p.rapidapi.com/v1/geo/cities?namePrefix=${e}`,{method:"GET",headers:{"X-RapidAPI-Key":"e910cc3969msh71ab17d4f77c665p1b6bfajsn5ecd6ff742cf","X-RapidAPI-Host":"wft-geo-db.p.rapidapi.com"}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return(await t.json()).data.map(r=>`${r.city}, ${r.country}`)}catch(t){return console.error("Error fetching city suggestions:",t),[]}},D=e=>{p.innerHTML="",e.forEach(t=>{const n=document.createElement("div");n.classList.add("suggestion"),n.textContent=t,n.addEventListener("click",()=>{m.value=t,u(t),p.innerHTML=""}),p.appendChild(n)})};navigator.geolocation?navigator.geolocation.getCurrentPosition(async e=>{const{latitude:t,longitude:n}=e.coords;await T(t,n)},()=>{o.textContent="Unable to retrieve your location."}):o.textContent="Geolocation is not supported by this browser.",m.addEventListener("input",async()=>{const e=m.value.trim();if(e){const t=await v(e);D(t)}else p.innerHTML=""}),m.addEventListener("keypress",e=>{if(e.key==="Enter"){const t=m.value.trim();t&&(u(t),p.innerHTML="")}}),C.addEventListener("click",()=>{c=!c,C.textContent=`Switch to 째${c?"F":"C"}`;const e=o.textContent.split(" ")[2];e&&u(e)})});document.addEventListener("DOMContentLoaded",()=>{const o=document.getElementById("toggle"),s=localStorage.getItem("theme");s&&(document.body.classList.add(s),o.checked=s==="dark-mode"),o.addEventListener("change",()=>{o.checked?(document.body.classList.remove("light-mode"),document.body.classList.add("dark-mode"),localStorage.setItem("theme","dark-mode")):(document.body.classList.remove("dark-mode"),document.body.classList.add("light-mode"),localStorage.setItem("theme","light-mode"))})});
